# AutoDL 数据传输工具

这是一个用于本地与 AutoDL 服务器之间传输数据的工具。使用 SFTP 协议，支持安全的文件传输。

## 功能特点

- 支持将本地文件传输到 AutoDL 服务器
- 支持从 AutoDL 服务器下载文件到本地
- 支持整个文件夹的递归传输
- 支持所有类型的文件
- 支持压缩后传输 (提高传输速度)
- 支持断点续传 (传输中断后可继续)
- 图形界面操作，简单易用
- 实时显示传输进度和速度
- 支持 JSON 配置文件管理连接信息
- 详细的错误提示和连接状态显示
- 自动创建远程目录结构

## 安装依赖

```bash
pip install -r requirements.txt
```

## 启动图形界面

```bash
python web_ui.py
```

启动后，在浏览器中访问 http://127.0.0.1:7860 即可打开图形界面。

## 图形界面使用说明

图形界面包含以下功能模块：

### 1. 服务器配置

- 服务器地址：输入 AutoDL 服务器地址，如 connect.nmb1.seetacloud.com
- SSH 端口号：输入 SSH 端口号
- 用户名：通常为 root
- 密码：输入您的服务器密码
- 保存配置：保存以上信息到配置文件
- 测试连接：测试服务器连接是否正常

### 2. 上传文件

- 选择要上传的单个或多个文件
- 输入远程目录路径
- 点击上传按钮开始上传

### 3. 上传文件夹

- 输入要上传的本地文件夹路径
- 输入远程目录路径
- 选择上传方式：
  - 常规上传：适合小文件夹
  - 压缩后上传：适合大型文件夹，先在本地压缩，再上传到服务器，最后在服务器上解压
- 断点续传：如果上传中断，可以从上次的位置继续上传
- 点击上传按钮开始上传

### 4. 从服务器下载

- 输入远程文件夹路径
- 输入本地保存路径
- 选择下载方式：
  - 常规下载：适合小文件夹
  - 压缩后下载：适合大型文件夹，先在服务器上压缩，再下载到本地，最后在本地解压
- 断点续传：如果下载中断，可以从上次的位置继续下载
- 点击下载按钮开始下载

## 配置说明

1. 在项目根目录创建 `config.json` 文件，填入以下内容：
```json
{
    "host": "connect.nmb1.seetacloud.com",
    "port": 17980,
    "username": "root",
    "password": "你的密码"
}
```

配置说明：
- `host`: AutoDL 服务器地址
- `port`: SSH 端口号
- `username`: 用户名
- `password`: 密码

## 命令行使用方法

除了图形界面外，也可以通过命令行使用基础功能：

1. 传输单个文件：
```bash
python main.py --local_path "本地文件路径" --remote_path "远程目标路径"
```

2. 传输整个文件夹：
```bash
python main.py --local_path "本地文件夹路径" --remote_path "远程目标路径"
```

示例：
```bash
# 传输单个文件
python main.py --local_path "D:/数据/测试.txt" --remote_path "/root/数据/测试.txt"

# 传输当前目录下的文件
python main.py --local_path "test.txt" --remote_path "/root/test.txt"

# 传输整个文件夹
python main.py --local_path "D:/我的数据" --remote_path "/root/我的数据"

# 传输当前目录下的文件夹
python main.py --local_path "./数据集" --remote_path "/root/数据集"
```

## 注意事项

- 确保本地路径存在
- 远程路径需要有写入权限
- Windows 系统下路径可以使用正斜杠 `/` 或反斜杠 `\`
- 建议使用绝对路径以避免路径问题
- 传输文件夹时会自动创建远程目录结构
- 支持传输所有类型的文件，无格式限制
- 对于大型文件夹，建议使用压缩后传输功能
- 如果传输中断，可以使用断点续传功能继续传输

## 错误处理

如果遇到问题，程序会显示详细的错误信息：
- 配置文件不存在或格式错误
- 连接失败（网络问题）
- 身份验证失败（用户名或密码错误）
- 文件访问权限问题
- 远程目录创建失败
- 压缩或解压失败

## 开发进度

- [x] 支持文件夹传输
- [x] 支持断点续传
- [x] 支持双向传输（上传/下载）
- [x] 支持压缩后传输
- [x] 图形用户界面
- [ ] 支持传输队列
- [ ] 支持传输速度限制
- [ ] 支持多文件并行传输 